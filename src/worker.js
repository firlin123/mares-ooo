const MARE_OOOS = [
    { file: 'img/linky/1.png', source: 'https://derpicdn.net/img/view/2024/6/15/3383980.png', alt: 'Linkooo' },
    { file: 'img/cloud-kicker/1.png', source: 'https://derpicdn.net/img/download/2021/8/28/2688692.png', alt: 'Clouuuuud Kicker' },
    { file: 'img/fluttershy/1.png', source: 'https://derpicdn.net/img/download/2024/5/14/3363764.png', alt: 'Fluuuuutershy' },
    { file: 'img/trixie/1.jpg', source: 'https://derpicdn.net/img/download/2022/2/14/2806847.jpg', alt: 'Great and Powerfuuuuul' },
    { file: 'img/cherry-berry/1.png', source: 'https://derpicdn.net/img/download/2021/6/18/2637961.png', alt: 'It\'s just so much to dooooo' },
    { file: 'img/carrot-top/1.png', source: 'https://derpicdn.net/img/download/2021/6/17/2637311.png', alt: 'It\'s just so much to dooooo' },
    { file: 'img/twilight-sparkle/1.gif', source: 'https://derpicdn.net/img/download/2015/12/21/1049299.gif', alt: 'Twi ooo' },
    { file: 'img/starlight-glimmer/1.png', source: 'https://desu-usergeneratedcontent.xyz/mlp/image/1673/28/1673280285649.png', alt: 'Starlight ooo' },
    { file: 'img/starlight-glimmer/2.png', source: 'https://desu-usergeneratedcontent.xyz/mlp/image/1687/11/1687112778739.png', alt: 'Starlight ooo' },
    { file: 'img/unknown/1.png', source: 'https://desu-usergeneratedcontent.xyz/mlp/image/1638/65/1638658092189.png', alt: 'Obscure mare ooo' },
    { file: 'img/fluttershy/2.png', source: 'https://derpicdn.net/img/download/2018/10/27/1867701.png', alt: 'Flutter ooo' },
    { file: 'img/luna/1.jpg', source: 'https://desu-usergeneratedcontent.xyz/mlp/image/1366/33/1366330264809.jpg', alt: 'Luuuuuna' },
    { file: 'img/applejack/1.png', source: 'https://desu-usergeneratedcontent.xyz/mlp/image/1616/35/1616351674956.png', alt: 'Applejack ooo' },
    { file: 'img/luna/2.png', source: 'https://desu-usergeneratedcontent.xyz/mlp/image/1616/35/1616351674956.png', alt: 'Nigthmare Moooooon' },
    { file: 'img/multi-ooos/1.png', source: 'https://desu-usergeneratedcontent.xyz/mlp/image/1616/33/1616339998353.png', alt: 'Linky, Ruby Pinch, and Bon Bon ooo' },
    { file: 'img/multi-ooos/2.png', source: 'https://desu-usergeneratedcontent.xyz/mlp/image/1616/33/1616339998353.png', alt: 'Daisy, Applejack, and Twilight ooo' },
    { file: 'img/lemon-hearts/1.png', source: 'https://desu-usergeneratedcontent.xyz/mlp/image/1622/51/1622510200783.png', alt: 'Lemon Hearts ooo' },
    { file: 'img/lightning-bolt/1.png', source: 'https://desu-usergeneratedcontent.xyz/mlp/image/1622/51/1622510200783.png', alt: 'Lightning Bolt ooo' },
    { file: 'img/rarity/1.png', source: 'https://desu-usergeneratedcontent.xyz/mlp/image/1438/36/1438364855225.png', alt: 'Rarity ooo' },
    { file: 'img/lily-valley/1.gif', source: 'https://derpicdn.net/img/download/2016/9/13/1248117.gif', alt: 'Lily Valley ooo' },
    { file: 'img/fluttershy/3.png', source: 'https://derpicdn.net/img/download/2018/10/29/1869333.png', alt: 'Fluttershy ooo' },
    { file: 'img/rainbow-dash/1.jpg', source: 'https://desu-usergeneratedcontent.xyz/mlp/image/1616/52/1616525586183.jpg', alt: 'Rainbow ooo' },
    { file: 'img/applejack/2.png', source: 'https://desu-usergeneratedcontent.xyz/mlp/image/1426/75/1426750530777.png', alt: 'Appuuuuuul' },
    { file: 'img/applejack/3.gif', source: 'https://desu-usergeneratedcontent.xyz/mlp/image/1614/88/1614884292789.gif', alt: 'Appul ooo' },
    { file: 'img/twilight-sparkle/2.jpg', source: 'S01E08 - Look before you sleep', alt: 'Twilight ooo' },
    { file: 'img/pinkie-pie/1.png', source: 'https://desu-usergeneratedcontent.xyz/mlp/image/1389/47/1389475641348.png', alt: 'Ponk ooo' },
    { file: 'img/twilight-sparkle/3.png', source: 'https://desu-usergeneratedcontent.xyz/mlp/image/1628/19/1628196256020.png', alt: 'Twilight ooo' },
    { file: 'img/berry-punch/1.png', source: 'https://desu-usergeneratedcontent.xyz/mlp/image/1624/85/1624851036061.png', alt: 'Berry Cam ooo' },
    { file: 'img/twilight-sparkle/4.png', source: 'https://derpicdn.net/img/download/2012/7/7/35567.gif', alt: 'You are from the fuuuuuture?' },
    { file: 'img/pinkie-pie/2.gif', source: 'https://desu-usergeneratedcontent.xyz/mlp/image/1489/86/1489867908850.gif', alt: 'Ponk ooo dance' },
    { file: 'img/twilight-sparkle/5.jpg', source: 'https://desu-usergeneratedcontent.xyz/mlp/image/1616/14/1616149083626.jpg', alt: 'Twilight ooo' },
    { file: 'img/sea-swirl/1.gif', source: 'https://desu-usergeneratedcontent.xyz/mlp/image/1442/14/1442141572316.gif', alt: 'Sea Swirl what are you thinking my dear? You haven\'t got the bits to be shopping \'round here' },
    { file: 'img/coco-pommel/1.png', source: 'https://desu-usergeneratedcontent.xyz/mlp/image/1436/85/1436858134074.png', alt: 'Coco ooo' },
    { file: 'img/autumn-blaze/1.png', source: 'https://desu-usergeneratedcontent.xyz/mlp/image/1543/22/1543226108843.png', alt: 'Autuuuumn Blaze' },
    { file: 'img/berry-punch/2.png', source: 'https://desu-usergeneratedcontent.xyz/mlp/image/1417/83/1417835381715.png', alt: '>tfw no booooooze' },
    { file: 'img/twilight-sparkle/6.png', source: 'https://desu-usergeneratedcontent.xyz/mlp/image/1635/26/1635260019184.png', alt: 'Booooook horse' },
    { file: 'img/rainbow-dash/2.jpg', source: 'https://desu-usergeneratedcontent.xyz/mlp/image/1439/05/1439050443630.jpg', alt: 'Rainbow ooo' },
    { file: 'img/beauty-brass/1.png', source: 'https://derpicdn.net/img/download/2015/3/15/849600.png', alt: 'Toooooooot' },
    { file: 'img/twilight-sparkle/7.png', source: 'https://desu-usergeneratedcontent.xyz/mlp/image/1616/30/1616304969631.png', alt: 'Twilight ooo' },
    { file: 'img/minuette/1.png', source: 'https://desu-usergeneratedcontent.xyz/mlp/image/1436/04/1436040184880.png', alt: 'Minuuuuuette' },
    { file: 'img/starlight-glimmer/3.png', source: 'https://desu-usergeneratedcontent.xyz/mlp/image/1609/42/1609427144262.png', alt: 'Starlight ooo' },
    { file: 'img/applejack/4.png', source: 'https://desu-usergeneratedcontent.xyz/mlp/image/1401/32/1401329092600.png', alt: 'Appl ooo' },
    { file: 'img/twilight-sparkle/8.png', source: 'https://desu-usergeneratedcontent.xyz/mlp/image/1613/38/1613380020441.png', alt: 'Twi balooooon' },
    { file: 'img/twilight-sparkle/9.jpg', source: 'https://desu-usergeneratedcontent.xyz/mlp/image/1615/66/1615664580015.jpg', alt: 'Twilight ooo' },
    { file: 'img/lightning-bolt/2.png', source: 'https://derpicdn.net/img/download/2024/7/13/3401026.png', alt: 'Lightning Bolt ooo' },
    { file: 'img/rarity/2.png', source: 'https://desu-usergeneratedcontent.xyz/mlp/image/1611/47/1611479952303.png', alt: 'Rarity ooo' },
    { file: 'img/berry-punch/3.gif', source: 'https://desu-usergeneratedcontent.xyz/mlp/image/1493/84/1493844865702.gif', alt: 'Berry workouuuuuut' },
    { file: 'img/rarity/3.jpg', source: 'https://desu-usergeneratedcontent.xyz/mlp/image/1616/39/1616399055477.jpg', alt: 'Rarity ooo' },
    { file: 'img/multi-ooos/3.png', source: 'https://desu-usergeneratedcontent.xyz/mlp/image/1615/67/1615671649138.png', alt: 'Rarity and Celestia ooo' },
    { file: 'img/lyra-heartstrings/1.png', source: 'https://desu-usergeneratedcontent.xyz/mlp/image/1638/65/1638656822143.png', alt: 'Lyrooooo' },
    { file: 'img/twilight-sparkle/10.png', source: 'https://derpicdn.net/img/download/2019/3/3/1975965.png', alt: 'Twilight ooo' },
    { file: 'img/amethyst-star/1.gif', source: 'https://derpicdn.net/img/download/2024/7/13/3401055.gif', alt: 'Amethyst wooohooo' },
    { file: 'img/pinkie-pie/3.png', source: 'https://desu-usergeneratedcontent.xyz/mlp/image/1418/36/1418360149929.png', alt: 'Ooooh she\'s goooood' },
    { file: 'img/lyra-heartstrings/2.gif', source: 'https://desu-usergeneratedcontent.xyz/mlp/image/1329/54/1329545895182.gif', alt: 'Lyra ooo' },
    { file: 'img/marble-pie/1.png', source: 'https://kissable.bluefast.horse/yjzrqcsj.png', alt: 'Marble ooo' },
    { file: 'img/limestone-pie/1.png', source: 'https://kissable.bluefast.horse/ej8mq1r.png', alt: 'Limestone ooo' },
    { file: 'img/fluttershy/4.png', source: 'https://derpicdn.net/img/view/2020/4/6/2315214.png', alt: 'Fluttershy ooo' },
    { file: 'img/cherry-berry/2.png', source: 'https://derpicdn.net/img/download/2020/8/21/2428058.png', alt: 'Cherry ooo' },
    { file: 'img/multi-ooos/4.gif', source: 'https://derpicdn.net/img/download/2016/2/7/1082843.gif', alt: 'Cherry Berry and Twinkeshine oooing' },
    { file: 'img/pinkie-pie/4.png', source: 'https://desu-usergeneratedcontent.xyz/mlp/image/1593/76/1593761309022.jpg', alt: 'Uuuuuupside down Ponk' },
    { file: 'img/daisy/1.png', source: 'https://desu-usergeneratedcontent.xyz/mlp/image/1638/65/1638656399008.png', alt: 'Daisy ooo' },
    { file: 'img/twilight-sparkle/11.png', source: 'https://desu-usergeneratedcontent.xyz/mlp/image/1603/57/1603577962988.png', alt: 'Twilight ooo' },
    { file: 'img/pinkie-pie/5.gif', source: 'https://desu-usergeneratedcontent.xyz/mlp/image/1433/99/1433999612951.gif', alt: 'Ponk ooo' },
    { file: 'img/carrot-top/2.png', source: 'https://desu-usergeneratedcontent.xyz/mlp/image/1460/82/1460821968469.png', alt: 'Carrot ooo' },
    { file: 'img/twilight-sparkle/12.jpg', source: 'https://desu-usergeneratedcontent.xyz/mlp/image/1632/08/1632085813926.jpg', alt: 'Twilight ooo' },
    { file: 'img/berry-punch/4.png', source: 'https://desu-usergeneratedcontent.xyz/mlp/image/1417/92/1417922044279.png', alt: 'Berry ooo' },
    { file: 'img/multi-ooos/5.png', source: 'S01E11 - Winter Wrap Up', alt: 'Carrot Top, Applejack, and Cherry Berry ooo' },
    { file: 'img/carrot-top/3.png', source: 'https://desu-usergeneratedcontent.xyz/mlp/image/1622/21/1622219578632.png', alt: 'Carrot ooo' },
    { file: 'img/bon-bon/1.png', source: 'https://desu-usergeneratedcontent.xyz/mlp/image/1624/46/1624468356921.png', alt: 'Angry ooo' },
    { file: 'img/roseluck/1.png', source: 'https://desu-usergeneratedcontent.xyz/mlp/image/1339/04/1339040465059.png', alt: 'Roseluck ooo' },
    { file: 'img/roseluck/2.png', source: 'https://desu-usergeneratedcontent.xyz/mlp/image/1418/48/1418487813647.png', alt: 'Roseluck ooo' },
    { file: 'img/bon-bon/2.png', source: 'https://desu-usergeneratedcontent.xyz/mlp/image/1618/53/1618534104753.png', alt: 'Bon Bon ooo' },
    { file: 'img/rainbow-dash/3.jpg', source: 'https://desu-usergeneratedcontent.xyz/mlp/image/1407/38/1407382488453.jpg', alt: 'Rainbow ooo' },
    { file: 'img/peachy-cream/1.gif', source: 'https://derpicdn.net/img/download/2016/2/1/1077976.gif', alt: 'Peachy boooop' },
    { file: 'img/cherry-berry/3.png', source: 'https://desu-usergeneratedcontent.xyz/mlp/image/1624/50/1624503071755.png', alt: 'Cherry ooo' },
    { file: 'img/pinkie-pie/6.gif', source: 'https://desu-usergeneratedcontent.xyz/mlp/image/1471/05/1471051430679.gif', alt: 'Ponk ooo' },
    { file: 'img/multi-ooos/6.png', source: 'https://desu-usergeneratedcontent.xyz/mlp/image/1622/13/1622134287964.png', alt: 'Amethyst and Bon Bon ooo' },
    { file: 'img/multi-ooos/7.png', source: 'https://desu-usergeneratedcontent.xyz/mlp/image/1628/95/1628957199514.png', alt: 'Rarity, Twilight, and Pinkie ooo' },
    { file: 'img/fluttershy/5.png', source: 'https://desu-usergeneratedcontent.xyz/mlp/image/1623/51/1623518404621.png', alt: 'Fluttershy ooo' },
    { file: 'img/lyra-heartstrings/3.png', source: 'https://desu-usergeneratedcontent.xyz/mlp/image/1629/14/1629144803243.png', alt: 'Lyra ooo' },
    { file: 'img/applejack/5.gif', source: 'https://desu-usergeneratedcontent.xyz/mlp/image/1616/51/1616515203929.gif', alt: 'Applejack ooo' },
    { file: 'img/rarity/4.png', source: 'https://desu-usergeneratedcontent.xyz/mlp/image/1617/01/1617018994719.gif', alt: 'Rarity ooo' },
    { file: 'img/twilight-sparkle/13.png', source: 'https://desu-usergeneratedcontent.xyz/mlp/image/1601/31/1601317637049.jpg', alt: 'Twilight ooo' },
    { file: 'img/fluttershy/6.gif', source: 'https://desu-usergeneratedcontent.xyz/mlp/image/1614/80/1614802900624.gif', alt: 'Fluttershy ooo' },
    { file: 'img/rarity/5.gif', source: 'https://desu-usergeneratedcontent.xyz/mlp/image/1417/43/1417434192699.gif', alt: 'Rarity ooo' },
    { file: 'img/rainbow-dash/4.png', source: 'https://desu-usergeneratedcontent.xyz/mlp/image/1619/03/1619031859940.png', alt: 'Rainbow ooo' },
    { file: 'img/rainbow-dash/5.png', source: 'https://desu-usergeneratedcontent.xyz/mlp/image/1417/22/1417223407188.png', alt: 'Fuuuuully autistic' },
    { file: 'img/apple-bloom/1.png', source: 'https://desu-usergeneratedcontent.xyz/mlp/image/1619/03/1619033650279.png', alt: 'Apple Bloooooom' },
    { file: 'img/tempest-shadow/1.png', source: 'https://desu-usergeneratedcontent.xyz/mlp/image/1602/01/1602011289069.png', alt: 'Tempest ooo' },
    { file: 'img/rainbow-dash/6.gif', source: 'https://desu-usergeneratedcontent.xyz/mlp/image/1417/28/1417288437904.gif', alt: 'Rainbow ooo' },
    { file: 'img/twilight-sparkle/14.png', source: 'https://desu-usergeneratedcontent.xyz/mlp/image/1482/16/1482161703889.jpg', alt: 'Twilight ooo' },
    { file: 'img/rarity/6.png', source: 'https://desu-usergeneratedcontent.xyz/mlp/image/1610/96/1610962375895.gif', alt: 'Rarity ooo' },
    { file: 'img/autumn-blaze/2.png', source: 'https://derpicdn.net/img/download/2020/2/11/2271474.png', alt: 'Autumn Booooop' },
    { file: 'img/sweeite-belle/1.png', source: 'https://desu-usergeneratedcontent.xyz/mlp/image/1616/28/1616282866314.png', alt: 'Sweetie ooo' },
    { file: 'img/rarity/7.png', source: 'https://desu-usergeneratedcontent.xyz/mlp/image/1428/98/1428988804668.png', alt: 'Rarity ooo' },
    { file: 'img/pinkie-pie/7.png', source: 'https://desu-usergeneratedcontent.xyz/mlp/image/1610/92/1610925711609.png', alt: 'Ponk Goooogle' },
    { file: 'img/lyra-heartstrings/4.png', source: 'https://desu-usergeneratedcontent.xyz/mlp/image/1617/68/1617684494698.png', alt: 'Lyra 80s ooo' },
    { file: 'img/rarity/8.png', source: 'https://desu-usergeneratedcontent.xyz/mlp/image/1624/39/1624396831052.png', alt: 'Rarity ooo' },
    { file: 'img/celestia/1.png', source: 'https://desu-usergeneratedcontent.xyz/mlp/image/1663/59/1663595549289.png', alt: 'Celestia ooo' },
    { file: 'img/celestia/2.png', source: 'https://derpicdn.net/img/download/2012/11/12/149639.png', alt: 'Celestia ooo' },
    { file: 'img/fluttershy/7.png', source: 'https://derpicdn.net/img/download/2024/7/13/3401247.png', alt: 'Fluttershy ooo' },
    { file: 'img/multi-ooos/8.png', source: 'https://derpicdn.net/img/download/2012/10/8/117349.png', alt: 'Cherry Berry and Twinkeshine ooo' },
    { file: 'img/rainbow-dash/7.png', source: 'https://derpicdn.net/img/download/2015/8/10/954706.png', alt: 'Rainbow ooo' },
    { file: 'img/daisy/2.png', source: 'https://derpicdn.net/img/download/2024/7/13/3401255.png', alt: 'Daisy ooo' },
    { file: 'img/sea-swirl/2.png', source: 'https://derpicdn.net/img/download/2019/2/28/1973926.png', alt: 'Sea Swirl ooo' },
    { file: 'img/linky/2.png', source: 'https://derpicdn.net/img/download/2016/4/12/1130805.gif', alt: 'Linky angry ooo' },
    { file: 'img/fluttershy/8.png', source: 'https://derpicdn.net/img/download/2022/3/20/2828656.png', alt: 'Fluttershy ooo' },
    { file: 'img/pinkie-pie/8.png', source: 'https://desu-usergeneratedcontent.xyz/mlp/image/1669/08/1669085496674.png', alt: 'Ponk ooo' },
    { file: 'img/derpy-hooves/1.png', source: 'https://desu-usergeneratedcontent.xyz/mlp/image/1637/18/1637188420180.png', alt: 'Derpy ooo' },
    { file: 'img/celestia/3.png', source: 'https://desu-usergeneratedcontent.xyz/mlp/image/1660/97/1660971248988.png', alt: 'Celestia ooo' },
    { file: 'img/autumn-blaze/3.png', source: 'https://desu-usergeneratedcontent.xyz/mlp/image/1633/09/1633097468897.jpg', alt: 'Autumn ooo' },
    { file: 'img/autumn-blaze/4.png', source: 'S08E23 - Sounds of Silence', alt: 'Autumn ooo' },
    { file: 'img/autumn-blaze/5.png', source: 'S08E23 - Sounds of Silence', alt: 'Autumn ooo' },
    { file: 'img/autumn-blaze/6.png', source: 'S08E23 - Sounds of Silence', alt: 'Autumn ooo' },
    { file: 'img/autumn-blaze/7.png', source: 'S08E23 - Sounds of Silence', alt: 'Autumn ooo' },
    { file: 'img/autumn-blaze/8.png', source: 'S08E23 - Sounds of Silence', alt: 'Autumn ooo' },
    { file: 'img/starlight-glimmer/4.gif', source: 'https://desu-usergeneratedcontent.xyz/mlp/image/1603/94/1603946763021.gif', alt: 'Starlight ooo' },
    { file: 'img/apple-bloom/2.jpg', source: 'https://desu-usergeneratedcontent.xyz/mlp/image/1602/09/1602097717357.jpg', alt: 'Apple Bloooom' },
    { file: 'img/luna/3.png', source: 'https://desu-usergeneratedcontent.xyz/mlp/image/1561/21/1561219973441.png', alt: 'Luuuuuna' },


    // TODOOOOO: Add more
];

// ffmpeg -i /media/firlin123/NTFS-PART/002_Sorted_HDD/MLP/mlp-fim_s1\[1080P\]/YP-1R-01x06.mkv -vf "crop=484:558:802:522" -ss 00:06:12.289 -to 00:06:14.750 frames/%04d.png

// tar 

function createHtmlResponse(head, body, headers = {}, status = 200) {
    headers = headers || {};
    status = status || 200;
    headers['Content-Type'] = 'text/html; charset=utf-8';
    return new Response(`<!DOCTYPE html>
<html>
    <head>${head}</head>
    <body>${body}</body>
</html>`, { headers, status });
}

function redirect(url) {
    return createHtmlResponse(
        `<title>Redirecting to ${url}...</title><meta http-equiv="refresh" content="0; url="${url}">`,
        `<p>Redirecting to <a href="${url}">${url}</a></p>`,
        { Location: url },
        302
    );
}

const STYLE = `html {
    display: flex;
    align-items: center;
    justify-content: center;
    height: 100%;
    width: 100%;
}

body {
    flex: 1;
    display: flex;
    justify-content: center;
    align-items: center;
    width: 100%;
    height: 100%;
    margin: 0;
}

img {
    width: 100%;
    height: 100%;
    object-fit: contain;
    background-color: black;
}`;

export default {
    async fetch(request, env, ctx) {
        let url = new URL(request.url);
        if (url.pathname === '/favicon.ico') {
            return fetch('https://firlin123.github.io/mares-ooo/img/favicon.ico');
        }
        if (url.hostname === 'submit.mares.ooo' || url.hostname === 'www.submit.mares.ooo') {
            return redirect('https://github.com/firlin123/mares-ooo/issues/new');
        }
        let useOoo = null;
        if (url.pathname.startsWith('/test/') && MARE_OOOS[url.pathname.slice(6)]) {
            useOoo = MARE_OOOS[url.pathname.slice(6)];
        }
        const randomMareOoo = useOoo ? useOoo : MARE_OOOS[Math.floor(Math.random() * MARE_OOOS.length)];
        return createHtmlResponse(
            `<title>Mares.ooo</title><style>${STYLE}</style>`,
            `<!-- Source: ${randomMareOoo.source} --><img src="https://firlin123.github.io/mares-ooo/${randomMareOoo.file}" alt="${randomMareOoo.alt}">`
        );
    }
};